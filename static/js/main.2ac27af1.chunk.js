(this["webpackJsonpeq-works-submission"]=this["webpackJsonpeq-works-submission"]||[]).push([[0],{155:function(e,t,n){},185:function(e,t,n){},322:function(e,t,n){},324:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),a=n(49),s=n.n(a),r=(n(185),n(11)),j=n(331),o=n(335),d=n(332),l=n(333),b=n(30),h=n(174),u=n(110),O=n.n(u),f=n(156),x=n(2);function v(e){var t=e.data;return 0!==Object.keys(t).length&&Object(x.jsxs)(f.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,variant:"dark",className:"tableView",children:[Object(x.jsx)("thead",{children:Object(x.jsx)("tr",{children:Object.keys(t[0]).map((function(e,t){return"d"===e?Object(x.jsx)("th",{children:"date"},t):Object(x.jsx)("th",{children:e},t)}))})}),Object(x.jsx)("tbody",{children:t.map((function(e,t){return Object(x.jsx)("tr",{children:Object.keys(e).map((function(t,n){return Object(x.jsx)("td",{children:e[t]},n)}))},t)}))})]})}var m=n(327),p=n(170),w=n(171),g=n(91),k=n(70),y=n(175);function S(e){var t=e.data,n=e.isEvents,i=function(){var e=Object(c.useState)({width:void 0,height:void 0}),t=Object(r.a)(e,2),n=t[0],i=t[1];return Object(c.useEffect)((function(){function e(){i({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n}(),a=Object(c.useState)(!1),s=Object(r.a)(a,2),j=s[0],o=s[1];return Object(c.useEffect)((function(){0!==Object.keys(t).length&&o(!0)}),[t,n]),j&&(n?Object(x.jsx)("div",{className:"chartView",children:Object(x.jsxs)(m.a,{width:i.width-64,height:i.height-176,data:t,children:[Object(x.jsx)(p.a,{dataKey:"d"}),Object(x.jsx)(w.a,{}),Object(x.jsx)(g.a,{}),Object(x.jsx)(k.a,{verticalAlign:"top"}),Object(x.jsx)(y.a,{fill:"#000080",dataKey:"events"})]})}):Object(x.jsxs)("div",{className:"chartView",children:[Object(x.jsxs)(m.a,{width:i.width/3-64,height:i.height-176,data:t,children:[Object(x.jsx)(p.a,{dataKey:"d"}),Object(x.jsx)(w.a,{}),Object(x.jsx)(g.a,{}),Object(x.jsx)(k.a,{verticalAlign:"top"}),Object(x.jsx)(y.a,{fill:"#800000",dataKey:"clicks"})]}),Object(x.jsxs)(m.a,{width:i.width/3-64,height:i.height-176,data:t,children:[Object(x.jsx)(p.a,{dataKey:"d"}),Object(x.jsx)(w.a,{width:70}),Object(x.jsx)(g.a,{}),Object(x.jsx)(k.a,{verticalAlign:"top"}),Object(x.jsx)(y.a,{fill:"#800080",dataKey:"impressions"})]}),Object(x.jsxs)(m.a,{width:i.width/3-64,height:i.height-176,data:t,children:[Object(x.jsx)(p.a,{dataKey:"d"}),Object(x.jsx)(w.a,{}),Object(x.jsx)(g.a,{}),Object(x.jsx)(k.a,{verticalAlign:"top"}),Object(x.jsx)(y.a,{fill:"#008000",dataKey:"revenue"})]})]}))}var C=function(e){var t=e.data,n=e.isEvents,i=e.isTable,a=e.timeFrame,s=Object(c.useState)(!1),j=Object(r.a)(s,2),o=j[0],d=j[1];return Object(c.useEffect)((function(){0!==Object.keys(t).length&&d(!0)}),[t,a,n,i]),o?i?Object(x.jsx)(v,{data:t}):Object(x.jsx)(S,{data:t,isEvents:n}):Object(x.jsx)("span",{children:"No data."})};n(155);function N(e){var t=e.visibleClass,n=e.closeCallback,i=e.poi,a=Object(c.useState)("daily"),s=Object(r.a)(a,2),j=s[0],o=s[1],d=Object(c.useState)(!0),l=Object(r.a)(d,2),u=l[0],f=l[1],v=Object(c.useState)(!0),m=Object(r.a)(v,2),p=m[0],w=m[1],g=Object(c.useState)({}),k=Object(r.a)(g,2),y=k[0],S=k[1],N=Object(c.useState)({}),E=Object(r.a)(N,2),_=E[0],K=E[1];Object(c.useEffect)((function(){u?fetch("https://eqworks-milisav-api-submission.glitch.me/events/"+j+"/"+i.poi_id).then((function(e){return e.json()})).then((function(e){return S(e)})):fetch("https://eqworks-milisav-api-submission.glitch.me/stats/"+j+"/"+i.poi_id).then((function(e){return e.json()})).then((function(e){return K(e)}))}),[u,j,t]);var q=Object(c.useState)([]),V=Object(r.a)(q,2),F=V[0],z=V[1],B=Object(c.useState)([]),L=Object(r.a)(B,2),T=L[0],A=L[1];return Object(c.useEffect)((function(){fetch("https://eqworks-milisav-api-submission.glitch.me/events/hourly/"+i.poi_id).then((function(e){return e.json()})).then((function(e){return z(e)})),fetch("https://eqworks-milisav-api-submission.glitch.me/stats/hourly/"+i.poi_id).then((function(e){return e.json()})).then((function(e){return A(e)}))}),[t]),Object(x.jsxs)("div",{id:"stats_screen",className:t,children:[Object(x.jsxs)("div",{className:"header",children:[Object(x.jsx)("h1",{children:i.name}),Object(x.jsx)(b.a,{variant:"outline-primary",onClick:n,children:Object(x.jsx)(h.a,{className:"backBtn"})})]}),Object(x.jsxs)("div",{className:"preferencesSection",children:[Object(x.jsxs)("div",{className:"preferencesSectionGroup",children:[Object(x.jsxs)(b.a,{variant:"primary",onClick:function(){return f(!0)},children:[i.name," Events"]}),Object(x.jsxs)(b.a,{variant:"primary",onClick:function(){return f(!1)},children:[i.name," Statistics"]})]}),Object(x.jsxs)("div",{className:"preferencesSectionGroup",children:[Object(x.jsx)(b.a,{variant:"secondary",onClick:function(){return w(!0)},children:"Table View"}),Object(x.jsx)(b.a,{variant:"secondary",onClick:function(){return w(!1)},children:"Chart View"})]}),Object(x.jsxs)("div",{className:"preferencesSectionGroup",children:[Object(x.jsx)(b.a,{variant:"dark",onClick:function(){return o("daily")},children:"Daily"}),Object(x.jsx)(b.a,{variant:"dark",onClick:function(){return o("weekly")},children:"Weekly"}),Object(x.jsx)(b.a,{variant:"dark",onClick:function(){return o("monthly")},children:"Monthly"}),Object(x.jsx)(b.a,{variant:"dark",onClick:function(){return o("yearly")},children:"Yearly"})]}),Object(x.jsxs)("div",{className:"preferencesSectionGroup",children:[Object(x.jsx)(O.a,{className:"downloadBtn",data:F,filename:"events_data_"+i.name+".csv",children:"Download Events CSV"}),Object(x.jsx)(O.a,{className:"downloadBtn",data:T,filename:"stats_data_"+i.name+".csv",children:"Download Stats CSV"})]})]}),Object(x.jsx)(C,{data:u?y:_,isEvents:u,isTable:p,timeFrame:j})]})}var E=n(172);function _(){return Object(x.jsxs)("div",{className:"loading",children:[Object(x.jsx)(E.a,{animation:"border",variant:"primary"}),Object(x.jsx)("span",{children:"Loading..."})]})}n(322);function K(){var e=Object(c.useState)("hidden"),t=Object(r.a)(e,2),n=t[0],i=t[1],a=Object(c.useState)(!0),s=Object(r.a)(a,2),b=s[0],h=s[1],u=Object(c.useState)({}),O=Object(r.a)(u,2),f=O[0],v=O[1],m=Object(c.useState)([]),p=Object(r.a)(m,2),w=p[0],g=p[1];return Object(c.useEffect)((function(){fetch("https://eqworks-milisav-api-submission.glitch.me/poi").then((function(e){return e.json()})).then((function(e){g(e),h(!1)}))}),[]),b?Object(x.jsx)(_,{}):Object(x.jsxs)("div",{children:[Object(x.jsx)(N,{visibleClass:n,closeCallback:function(){i("hidden")},poi:f}),Object(x.jsxs)(j.a,{className:"MapContainer",center:[43.6708,-79.3899],zoom:12,zoomControl:!1,children:[Object(x.jsx)(o.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),w.map((function(e){return Object(x.jsx)(d.a,{position:[e.lat,e.lon],eventHandlers:{click:function(){v(e),i("visible")}},children:Object(x.jsx)(l.a,{permanent:!0,children:e.name})},e.poi_id)}))]})]})}var q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,336)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),i(e),a(e),s(e)}))};n(323);s.a.render(Object(x.jsx)(i.a.StrictMode,{children:Object(x.jsx)(K,{})}),document.getElementById("root")),q()}},[[324,1,2]]]);
//# sourceMappingURL=main.2ac27af1.chunk.js.map